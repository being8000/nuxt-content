{"_path":"/deployments/folder1/pm2","_draft":false,"_partial":false,"_locale":"en","_empty":false,"title":"PM2","description":"How to deploy Nuxt with PM2 cluster mode enabled?","excerpt":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"deploy-nuxt-using-pm2"},"children":[{"type":"text","value":"Deploy Nuxt using PM2"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"How to deploy Nuxt with PM2 cluster mode enabled?"}]},{"type":"element","tag":"hr","props":{},"children":[]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Deploying using "},{"type":"element","tag":"a","props":{"href":"https://pm2.keymetrics.io/","rel":["nofollow"]},"children":[{"type":"text","value":"PM2"}]},{"type":"text","value":" (Process Manager 2) is a fast and easy solution for hosting your universal Nuxt application on your server or VM."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"In this guide, we build the application locally and serve it through a PM2 config file with the cluster mode activated. Cluster mode will prevent downtime by allowing applications to be scaled across multiple CPUs."}]},{"type":"element","tag":"h2","props":{"id":"getting-started"},"children":[{"type":"text","value":"Getting Started"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Make sure you have pm2 installed on your server. If not, simply globally install it from yarn or npm."}]},{"type":"element","tag":"code","props":{"code":"# yarn pm2 install\r\n$ sudo yarn global add pm2 --prefix /usr/local\r\n\r\n# npm pm2 install\r\n$ npm install pm2 -g\n","language":"bash"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"# yarn pm2 install\r\n$ sudo yarn global add pm2 --prefix /usr/local\r\n\r\n# npm pm2 install\r\n$ npm install pm2 -g\n"}]}]}]},{"type":"element","tag":"h2","props":{"id":"configure-your-application"},"children":[{"type":"text","value":"Configure your application"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"All you need to add to your universal Nuxt app for serving it though PM2 is a file called "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"ecosystem.config.js"}]},{"type":"text","value":". Create a new file with that name in your root project directory and add the following content:"}]},{"type":"element","tag":"code","props":{"code":"module.exports = {\r\n  apps: [\r\n    {\r\n      name: 'NuxtAppName',\r\n      exec_mode: 'cluster',\r\n      instances: 'max', // Or a number of instances\r\n      script: './node_modules/nuxt/bin/nuxt.js',\r\n      args: 'start'\r\n    }\r\n  ]\r\n}\n","language":"javascript"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"module.exports = {\r\n  apps: [\r\n    {\r\n      name: 'NuxtAppName',\r\n      exec_mode: 'cluster',\r\n      instances: 'max', // Or a number of instances\r\n      script: './node_modules/nuxt/bin/nuxt.js',\r\n      args: 'start'\r\n    }\r\n  ]\r\n}\n"}]}]}]},{"type":"element","tag":"h2","props":{"id":"build-and-serve-the-app"},"children":[{"type":"text","value":"Build and serve the app"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Now build your app with "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"npm run build"}]},{"type":"text","value":"."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"And serve it with "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"pm2 start"}]},{"type":"text","value":"."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Check the status "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"pm2 ls"}]},{"type":"text","value":"."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Your Nuxt application is now serving!"}]},{"type":"element","tag":"h2","props":{"id":"further-information"},"children":[{"type":"text","value":"Further Information"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This solution guarantees no downtime for your application on this server. (You should also prevent server failure through redundancy or high availability cloud solutions.)"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"You can find PM2 additional configurations "},{"type":"element","tag":"a","props":{"href":"https://pm2.keymetrics.io/docs/usage/application-declaration/#general","rel":["nofollow"]},"children":[{"type":"text","value":"here"}]},{"type":"text","value":"."}]}]},"template":"guide","target":"Server","category":"deployment","logo":{"light":"/img/companies/square/light/pm2.png","dark":"/img/companies/square/dark/pm2.png"},"body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"deploy-nuxt-using-pm2"},"children":[{"type":"text","value":"Deploy Nuxt using PM2"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"How to deploy Nuxt with PM2 cluster mode enabled?"}]},{"type":"element","tag":"hr","props":{},"children":[]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Deploying using "},{"type":"element","tag":"a","props":{"href":"https://pm2.keymetrics.io/","rel":["nofollow"]},"children":[{"type":"text","value":"PM2"}]},{"type":"text","value":" (Process Manager 2) is a fast and easy solution for hosting your universal Nuxt application on your server or VM."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"In this guide, we build the application locally and serve it through a PM2 config file with the cluster mode activated. Cluster mode will prevent downtime by allowing applications to be scaled across multiple CPUs."}]},{"type":"element","tag":"h2","props":{"id":"getting-started"},"children":[{"type":"text","value":"Getting Started"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Make sure you have pm2 installed on your server. If not, simply globally install it from yarn or npm."}]},{"type":"element","tag":"code","props":{"code":"# yarn pm2 install\r\n$ sudo yarn global add pm2 --prefix /usr/local\r\n\r\n# npm pm2 install\r\n$ npm install pm2 -g\n","language":"bash"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ae2d77"},"children":[{"type":"text","value":"# yarn pm2 install"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2ddc6f"},"children":[{"type":"text","value":"$ sudo yarn global add pm2 --prefix /usr/local"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ae2d77"},"children":[{"type":"text","value":"# npm pm2 install"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2ddc6f"},"children":[{"type":"text","value":"$ npm install pm2 -g"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"configure-your-application"},"children":[{"type":"text","value":"Configure your application"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"All you need to add to your universal Nuxt app for serving it though PM2 is a file called "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"ecosystem.config.js"}]},{"type":"text","value":". Create a new file with that name in your root project directory and add the following content:"}]},{"type":"element","tag":"code","props":{"code":"module.exports = {\r\n  apps: [\r\n    {\r\n      name: 'NuxtAppName',\r\n      exec_mode: 'cluster',\r\n      instances: 'max', // Or a number of instances\r\n      script: './node_modules/nuxt/bin/nuxt.js',\r\n      args: 'start'\r\n    }\r\n  ]\r\n}\n","language":"javascript"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-90ee7c"},"children":[{"type":"text","value":"module"}]},{"type":"element","tag":"span","props":{"class":"ct-2ddc6f"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-90ee7c"},"children":[{"type":"text","value":"exports"}]},{"type":"element","tag":"span","props":{"class":"ct-2ddc6f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-137283"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-2ddc6f"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-14f269"},"children":[{"type":"text","value":"  apps"}]},{"type":"element","tag":"span","props":{"class":"ct-43cc50"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-14f269"},"children":[{"type":"text","value":" ["}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2ddc6f"},"children":[{"type":"text","value":"    {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-14f269"},"children":[{"type":"text","value":"      name"}]},{"type":"element","tag":"span","props":{"class":"ct-43cc50"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-14f269"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2c053c"},"children":[{"type":"text","value":"'"}]},{"type":"element","tag":"span","props":{"class":"ct-b0580f"},"children":[{"type":"text","value":"NuxtAppName"}]},{"type":"element","tag":"span","props":{"class":"ct-2c053c"},"children":[{"type":"text","value":"'"}]},{"type":"element","tag":"span","props":{"class":"ct-14f269"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-14f269"},"children":[{"type":"text","value":"      exec_mode"}]},{"type":"element","tag":"span","props":{"class":"ct-43cc50"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-14f269"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2c053c"},"children":[{"type":"text","value":"'"}]},{"type":"element","tag":"span","props":{"class":"ct-b0580f"},"children":[{"type":"text","value":"cluster"}]},{"type":"element","tag":"span","props":{"class":"ct-2c053c"},"children":[{"type":"text","value":"'"}]},{"type":"element","tag":"span","props":{"class":"ct-14f269"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-14f269"},"children":[{"type":"text","value":"      instances"}]},{"type":"element","tag":"span","props":{"class":"ct-43cc50"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-14f269"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2c053c"},"children":[{"type":"text","value":"'"}]},{"type":"element","tag":"span","props":{"class":"ct-b0580f"},"children":[{"type":"text","value":"max"}]},{"type":"element","tag":"span","props":{"class":"ct-2c053c"},"children":[{"type":"text","value":"'"}]},{"type":"element","tag":"span","props":{"class":"ct-14f269"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-c50fd4"},"children":[{"type":"text","value":"// Or a number of instances"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-14f269"},"children":[{"type":"text","value":"      script"}]},{"type":"element","tag":"span","props":{"class":"ct-43cc50"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-14f269"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2c053c"},"children":[{"type":"text","value":"'"}]},{"type":"element","tag":"span","props":{"class":"ct-b0580f"},"children":[{"type":"text","value":"./node_modules/nuxt/bin/nuxt.js"}]},{"type":"element","tag":"span","props":{"class":"ct-2c053c"},"children":[{"type":"text","value":"'"}]},{"type":"element","tag":"span","props":{"class":"ct-14f269"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-14f269"},"children":[{"type":"text","value":"      args"}]},{"type":"element","tag":"span","props":{"class":"ct-43cc50"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-14f269"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2c053c"},"children":[{"type":"text","value":"'"}]},{"type":"element","tag":"span","props":{"class":"ct-b0580f"},"children":[{"type":"text","value":"start"}]},{"type":"element","tag":"span","props":{"class":"ct-2c053c"},"children":[{"type":"text","value":"'"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2ddc6f"},"children":[{"type":"text","value":"    }"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2ddc6f"},"children":[{"type":"text","value":"  ]"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2ddc6f"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"build-and-serve-the-app"},"children":[{"type":"text","value":"Build and serve the app"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Now build your app with "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"npm run build"}]},{"type":"text","value":"."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"And serve it with "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"pm2 start"}]},{"type":"text","value":"."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Check the status "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"pm2 ls"}]},{"type":"text","value":"."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Your Nuxt application is now serving!"}]},{"type":"element","tag":"h2","props":{"id":"further-information"},"children":[{"type":"text","value":"Further Information"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This solution guarantees no downtime for your application on this server. (You should also prevent server failure through redundancy or high availability cloud solutions.)"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"You can find PM2 additional configurations "},{"type":"element","tag":"a","props":{"href":"https://pm2.keymetrics.io/docs/usage/application-declaration/#general","rel":["nofollow"]},"children":[{"type":"text","value":"here"}]},{"type":"text","value":"."}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-c50fd4{color:#7B7F8B}.ct-b0580f{color:#E7EE98}.ct-2c053c{color:#DEE492}.ct-43cc50{color:#F286C4}.ct-14f269{color:#F6F6F4}.ct-137283{color:#F286C4}.ct-90ee7c{color:#97E1F1}.ct-2ddc6f{color:#F6F6F4}.ct-ae2d77{color:#7B7F8B}.sepia .ct-ae2d77{color:#88846F}.dark .ct-ae2d77{color:#8B949E}.sepia .ct-2ddc6f{color:#F8F8F2}.dark .ct-2ddc6f{color:#C9D1D9}.sepia .ct-90ee7c{color:#66D9EF}.dark .ct-90ee7c{color:#79C0FF}.sepia .ct-137283{color:#F92672}.dark .ct-137283{color:#FF7B72}.dark .ct-14f269{color:#C9D1D9}.sepia .ct-14f269{color:#F8F8F2}.dark .ct-43cc50{color:#C9D1D9}.sepia .ct-43cc50{color:#F8F8F2}.dark .ct-2c053c{color:#A5D6FF}.sepia .ct-2c053c{color:#E6DB74}.dark .ct-b0580f{color:#A5D6FF}.sepia .ct-b0580f{color:#E6DB74}.dark .ct-c50fd4{color:#8B949E}.sepia .ct-c50fd4{color:#88846F}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"getting-started","depth":2,"text":"Getting Started"},{"id":"configure-your-application","depth":2,"text":"Configure your application"},{"id":"build-and-serve-the-app","depth":2,"text":"Build and serve the app"},{"id":"further-information","depth":2,"text":"Further Information"}]}},"_type":"markdown","_id":"content:deployments:folder1:pm2.md","_source":"content","_file":"deployments/folder1/pm2.md","_extension":"md"}