{"_path":"/deployments/folder1/nginx","_draft":false,"_partial":false,"_locale":"en","_empty":false,"title":"NGINX","description":"How to use nginx as a reverse proxy?","excerpt":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"using-nginx-as-a-reverse-proxy"},"children":[{"type":"text","value":"Using NGINX as a reverse proxy"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"How to use nginx as a reverse proxy?"}]},{"type":"element","tag":"hr","props":{},"children":[]},{"type":"element","tag":"code","props":{"code":"map $sent_http_content_type $expires {\r\n    \"text/html\"                 epoch;\r\n    \"text/html; charset=utf-8\"  epoch;\r\n    default                     off;\r\n}\r\n\r\nserver {\r\n    listen          80;             # the port nginx is listening on\r\n    server_name     your-domain;    # setup your domain here\r\n\r\n    gzip            on;\r\n    gzip_types      text/plain application/xml text/css application/javascript;\r\n    gzip_min_length 1000;\r\n\r\n    location / {\r\n        expires $expires;\r\n\r\n        proxy_redirect                      off;\r\n        proxy_set_header Host               $host;\r\n        proxy_set_header X-Real-IP          $remote_addr;\r\n        proxy_set_header X-Forwarded-For    $proxy_add_x_forwarded_for;\r\n        proxy_set_header X-Forwarded-Proto  $scheme;\r\n        proxy_read_timeout          1m;\r\n        proxy_connect_timeout       1m;\r\n        proxy_pass                          http://127.0.0.1:3000; # set the address of the Node.js instance here\r\n    }\r\n}\n","language":"nginx"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"map $sent_http_content_type $expires {\r\n    \"text/html\"                 epoch;\r\n    \"text/html; charset=utf-8\"  epoch;\r\n    default                     off;\r\n}\r\n\r\nserver {\r\n    listen          80;             # the port nginx is listening on\r\n    server_name     your-domain;    # setup your domain here\r\n\r\n    gzip            on;\r\n    gzip_types      text/plain application/xml text/css application/javascript;\r\n    gzip_min_length 1000;\r\n\r\n    location / {\r\n        expires $expires;\r\n\r\n        proxy_redirect                      off;\r\n        proxy_set_header Host               $host;\r\n        proxy_set_header X-Real-IP          $remote_addr;\r\n        proxy_set_header X-Forwarded-For    $proxy_add_x_forwarded_for;\r\n        proxy_set_header X-Forwarded-Proto  $scheme;\r\n        proxy_read_timeout          1m;\r\n        proxy_connect_timeout       1m;\r\n        proxy_pass                          http://127.0.0.1:3000; # set the address of the Node.js instance here\r\n    }\r\n}\n"}]}]}]},{"type":"element","tag":"h2","props":{"id":"using-nginx-with-generated-pages-and-a-caching-proxy-as-fallback"},"children":[{"type":"text","value":"Using nginx with generated pages and a caching proxy as fallback:"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"If you have a high volume website with regularly changing content, you might want to benefit from Nuxt generate capabilities and "},{"type":"element","tag":"a","props":{"href":"https://www.nginx.com/blog/nginx-caching-guide","rel":["nofollow"]},"children":[{"type":"text","value":"nginx caching"}]},{"type":"text","value":"."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Below is an example configuration. Keep in mind that:"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"root folder should be the same as set by "},{"type":"element","tag":"a","props":{"href":"/docs/configuration-glossary/configuration-generate#dir"},"children":[{"type":"text","value":"configuration generate.dir"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"expire headers set by Nuxt are stripped (due to the cache)"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"both Nuxt and nginx can set additional headers, it's advised to choose one (if in doubt, choose nginx)"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"if your site is mostly static, increase the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"proxy_cache_path inactive"}]},{"type":"text","value":" and "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"proxy_cache_valid"}]},{"type":"text","value":" numbers"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"If you don't generate your routes but still wish to benefit from nginx cache:"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"remove the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"root"}]},{"type":"text","value":" entry"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"change "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"location @proxy {"}]},{"type":"text","value":" to "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"location / {"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"remove the other 2 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"location"}]},{"type":"text","value":" entries"}]}]},{"type":"element","tag":"code","props":{"code":"proxy_cache_path  /data/nginx/cache levels=1:2 keys_zone=nuxt-cache:25m max_size=1g inactive=60m use_temp_path=off;\r\n\r\nmap $sent_http_content_type $expires {\r\n    \"text/html\"                 1h; # set this to your needs\r\n    \"text/html; charset=utf-8\"  1h; # set this to your needs\r\n    default                     7d; # set this to your needs\r\n}\r\n\r\nserver {\r\n    listen          80;             # the port nginx is listening on\r\n    server_name     your-domain;    # setup your domain here\r\n\r\n    gzip            on;\r\n    gzip_types      text/plain application/xml text/css application/javascript;\r\n    gzip_min_length 1000;\r\n\r\n    charset utf-8;\r\n\r\n    root /var/www/NUXT_PROJECT_PATH/dist;\r\n\r\n    location ~* \\.(?:ico|gif|jpe?g|png|woff2?|eot|otf|ttf|svg|js|css)$ {\r\n        expires $expires;\r\n        add_header Pragma public;\r\n        add_header Cache-Control \"public\";\r\n\r\n        try_files $uri $uri/ @proxy;\r\n    }\r\n\r\n    location / {\r\n        expires $expires;\r\n        add_header Content-Security-Policy \"default-src 'self' 'unsafe-inline';\";\r\n        add_header Strict-Transport-Security \"max-age=31536000; includeSubDomains; preload\" always;\r\n        add_header X-Frame-Options \"SAMEORIGIN\";\r\n\r\n        try_files $uri $uri/index.html @proxy; # for generate.subFolders: true\r\n        # try_files $uri $uri.html @proxy; # for generate.subFolders: false\r\n    }\r\n\r\n    location @proxy {\r\n        expires $expires;\r\n        add_header Content-Security-Policy \"default-src 'self' 'unsafe-inline';\";\r\n        add_header Strict-Transport-Security \"max-age=31536000; includeSubDomains; preload\" always;\r\n        add_header X-Frame-Options \"SAMEORIGIN\";\r\n        add_header X-Cache-Status $upstream_cache_status;\r\n\r\n        proxy_redirect                      off;\r\n        proxy_set_header Host               $host;\r\n        proxy_set_header X-Real-IP          $remote_addr;\r\n        proxy_set_header X-Forwarded-For    $proxy_add_x_forwarded_for;\r\n        proxy_set_header X-Forwarded-Proto  $scheme;\r\n        proxy_ignore_headers        Cache-Control;\r\n        proxy_http_version          1.1;\r\n        proxy_read_timeout          1m;\r\n        proxy_connect_timeout       1m;\r\n        proxy_pass                  http://127.0.0.1:3000; # set the address of the Node.js instance here\r\n        proxy_cache                 nuxt-cache;\r\n        proxy_cache_bypass          $arg_nocache; # probably better to change this\r\n        proxy_cache_valid           200 302  60m; # set this to your needs\r\n        proxy_cache_valid           404      1m;  # set this to your needs\r\n        proxy_cache_lock            on;\r\n        proxy_cache_use_stale error timeout http_500 http_502 http_503 http_504;\r\n        proxy_cache_key             $uri$is_args$args;\r\n    }\r\n}\n","language":"nginx"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"proxy_cache_path  /data/nginx/cache levels=1:2 keys_zone=nuxt-cache:25m max_size=1g inactive=60m use_temp_path=off;\r\n\r\nmap $sent_http_content_type $expires {\r\n    \"text/html\"                 1h; # set this to your needs\r\n    \"text/html; charset=utf-8\"  1h; # set this to your needs\r\n    default                     7d; # set this to your needs\r\n}\r\n\r\nserver {\r\n    listen          80;             # the port nginx is listening on\r\n    server_name     your-domain;    # setup your domain here\r\n\r\n    gzip            on;\r\n    gzip_types      text/plain application/xml text/css application/javascript;\r\n    gzip_min_length 1000;\r\n\r\n    charset utf-8;\r\n\r\n    root /var/www/NUXT_PROJECT_PATH/dist;\r\n\r\n    location ~* \\.(?:ico|gif|jpe?g|png|woff2?|eot|otf|ttf|svg|js|css)$ {\r\n        expires $expires;\r\n        add_header Pragma public;\r\n        add_header Cache-Control \"public\";\r\n\r\n        try_files $uri $uri/ @proxy;\r\n    }\r\n\r\n    location / {\r\n        expires $expires;\r\n        add_header Content-Security-Policy \"default-src 'self' 'unsafe-inline';\";\r\n        add_header Strict-Transport-Security \"max-age=31536000; includeSubDomains; preload\" always;\r\n        add_header X-Frame-Options \"SAMEORIGIN\";\r\n\r\n        try_files $uri $uri/index.html @proxy; # for generate.subFolders: true\r\n        # try_files $uri $uri.html @proxy; # for generate.subFolders: false\r\n    }\r\n\r\n    location @proxy {\r\n        expires $expires;\r\n        add_header Content-Security-Policy \"default-src 'self' 'unsafe-inline';\";\r\n        add_header Strict-Transport-Security \"max-age=31536000; includeSubDomains; preload\" always;\r\n        add_header X-Frame-Options \"SAMEORIGIN\";\r\n        add_header X-Cache-Status $upstream_cache_status;\r\n\r\n        proxy_redirect                      off;\r\n        proxy_set_header Host               $host;\r\n        proxy_set_header X-Real-IP          $remote_addr;\r\n        proxy_set_header X-Forwarded-For    $proxy_add_x_forwarded_for;\r\n        proxy_set_header X-Forwarded-Proto  $scheme;\r\n        proxy_ignore_headers        Cache-Control;\r\n        proxy_http_version          1.1;\r\n        proxy_read_timeout          1m;\r\n        proxy_connect_timeout       1m;\r\n        proxy_pass                  http://127.0.0.1:3000; # set the address of the Node.js instance here\r\n        proxy_cache                 nuxt-cache;\r\n        proxy_cache_bypass          $arg_nocache; # probably better to change this\r\n        proxy_cache_valid           200 302  60m; # set this to your needs\r\n        proxy_cache_valid           404      1m;  # set this to your needs\r\n        proxy_cache_lock            on;\r\n        proxy_cache_use_stale error timeout http_500 http_502 http_503 http_504;\r\n        proxy_cache_key             $uri$is_args$args;\r\n    }\r\n}\n"}]}]}]},{"type":"element","tag":"h2","props":{"id":"nginx-configuration-for-laravel-forge"},"children":[{"type":"text","value":"nginx configuration for Laravel Forge:"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Change "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"YOUR_WEBSITE_FOLDER"}]},{"type":"text","value":" to your website folder and "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"YOUR_WEBSITE_DOMAIN"}]},{"type":"text","value":" to your website URL. Laravel Forge will have filled out these values for you but be sure to double check."}]},{"type":"element","tag":"code","props":{"code":"# FORGE CONFIG (DOT NOT REMOVE!)\r\ninclude forge-conf/YOUR_WEBSITE_FOLDER/before/*;\r\n\r\nmap $sent_http_content_type $expires {\r\n    \"text/html\"                 epoch;\r\n    \"text/html; charset=utf-8\"  epoch;\r\n    default                     off;\r\n}\r\n\r\nserver {\r\n    listen 80;\r\n    listen [::]:80;\r\n    server_name YOUR_WEBSITE_DOMAIN;\r\n\r\n    add_header X-Frame-Options \"SAMEORIGIN\";\r\n    add_header X-XSS-Protection \"1; mode=block\";\r\n    add_header X-Content-Type-Options \"nosniff\";\r\n\r\n    charset utf-8;\r\n\r\n    gzip            on;\r\n    gzip_types      text/plain application/xml text/css application/javascript;\r\n    gzip_min_length 1000;\r\n\r\n    # FORGE CONFIG (DOT NOT REMOVE!)\r\n    include forge-conf/YOUR_WEBSITE_FOLDER/server/*;\r\n\r\n    location / {\r\n        expires $expires;\r\n\r\n        proxy_redirect off;\r\n        proxy_set_header Host               $host;\r\n        proxy_set_header X-Real-IP          $remote_addr;\r\n        proxy_set_header X-Forwarded-For    $proxy_add_x_forwarded_for;\r\n        proxy_set_header X-Forwarded-Proto  $scheme;\r\n        proxy_read_timeout          1m;\r\n        proxy_connect_timeout       1m;\r\n        proxy_pass                          http://127.0.0.1:3000; # set the address of the Node.js\r\n    }\r\n\r\n    access_log off;\r\n    error_log  /var/log/nginx/YOUR_WEBSITE_FOLDER-error.log error;\r\n\r\n    location ~ /\\.(?!well-known).* {\r\n        deny all;\r\n    }\r\n}\r\n\r\n# FORGE CONFIG (DOT NOT REMOVE!)\r\ninclude forge-conf/YOUR_WEBSITE_FOLDER/after/*;\n","language":"nginx"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"# FORGE CONFIG (DOT NOT REMOVE!)\r\ninclude forge-conf/YOUR_WEBSITE_FOLDER/before/*;\r\n\r\nmap $sent_http_content_type $expires {\r\n    \"text/html\"                 epoch;\r\n    \"text/html; charset=utf-8\"  epoch;\r\n    default                     off;\r\n}\r\n\r\nserver {\r\n    listen 80;\r\n    listen [::]:80;\r\n    server_name YOUR_WEBSITE_DOMAIN;\r\n\r\n    add_header X-Frame-Options \"SAMEORIGIN\";\r\n    add_header X-XSS-Protection \"1; mode=block\";\r\n    add_header X-Content-Type-Options \"nosniff\";\r\n\r\n    charset utf-8;\r\n\r\n    gzip            on;\r\n    gzip_types      text/plain application/xml text/css application/javascript;\r\n    gzip_min_length 1000;\r\n\r\n    # FORGE CONFIG (DOT NOT REMOVE!)\r\n    include forge-conf/YOUR_WEBSITE_FOLDER/server/*;\r\n\r\n    location / {\r\n        expires $expires;\r\n\r\n        proxy_redirect off;\r\n        proxy_set_header Host               $host;\r\n        proxy_set_header X-Real-IP          $remote_addr;\r\n        proxy_set_header X-Forwarded-For    $proxy_add_x_forwarded_for;\r\n        proxy_set_header X-Forwarded-Proto  $scheme;\r\n        proxy_read_timeout          1m;\r\n        proxy_connect_timeout       1m;\r\n        proxy_pass                          http://127.0.0.1:3000; # set the address of the Node.js\r\n    }\r\n\r\n    access_log off;\r\n    error_log  /var/log/nginx/YOUR_WEBSITE_FOLDER-error.log error;\r\n\r\n    location ~ /\\.(?!well-known).* {\r\n        deny all;\r\n    }\r\n}\r\n\r\n# FORGE CONFIG (DOT NOT REMOVE!)\r\ninclude forge-conf/YOUR_WEBSITE_FOLDER/after/*;\n"}]}]}]},{"type":"element","tag":"h2","props":{"id":"secure-laravel-forge-with-tls"},"children":[{"type":"text","value":"Secure Laravel Forge with TLS:"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"It's best to let Laravel Forge do the editing of the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"nginx.conf"}]},{"type":"text","value":" for you, by clicking on Sites -> YOUR_WEBSITE_DOMAIN (SERVER_NAME) and then click on SSL and install a certificate from one of the providers. Remember to activate the certificate. Your "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"nginx.conf"}]},{"type":"text","value":" should now look something like this:"}]},{"type":"element","tag":"code","props":{"code":"# FORGE CONFIG (DOT NOT REMOVE!)\r\ninclude forge-conf/YOUR_WEBSITE_FOLDER/before/*;\r\n\r\nmap $sent_http_content_type $expires {\r\n    \"text/html\"                 epoch;\r\n    \"text/html; charset=utf-8\"  epoch;\r\n    default                     off;\r\n}\r\n\r\nserver {\r\n    listen 443 ssl http2;\r\n    listen [::]:443 ssl http2;\r\n    server_name YOUR_WEBSITE_DOMAIN;\r\n\r\n    # FORGE SSL (DO NOT REMOVE!)\r\n    ssl_certificate /etc/nginx/ssl/YOUR_WEBSITE_FOLDER/258880/server.crt;\r\n    ssl_certificate_key /etc/nginx/ssl/YOUR_WEBSITE_FOLDER/258880/server.key;\r\n\r\n    ssl_protocols TLSv1 TLSv1.1 TLSv1.2;\r\n    ssl_ciphers 'ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-AES256-GCM-SHA384:DHE-RSA-AES128-GCM-SHA256:DHE-DSS-AES128-GCM-SHA256:kEDH+AESGCM:ECDHE-RSA-AES128-SHA256:ECDHE-ECDSA-AES128-SHA256:ECDHE-RSA-AES128-SHA:ECDHE-ECDSA-AES128-SHA:ECDHE-RSA-AES256-SHA384:ECDHE-ECDSA-AES256-SHA384:ECDHE-RSA-AES256-SHA:ECDHE-ECDSA-AES256-SHA:DHE-RSA-AES128-SHA256:DHE-RSA-AES128-SHA:DHE-DSS-AES128-SHA256:DHE-RSA-AES256-SHA256:DHE-DSS-AES256-SHA:DHE-RSA-AES256-SHA:AES128-GCM-SHA256:AES256-GCM-SHA384:AES128-SHA256:AES256-SHA256:AES128-SHA:AES256-SHA:AES:CAMELLIA:DES-CBC3-SHA:!aNULL:!eNULL:!EXPORT:!DES:!RC4:!MD5:!PSK:!aECDH:!EDH-DSS-DES-CBC3-SHA:!EDH-RSA-DES-CBC3-SHA:!KRB5-DES-CBC3-SHA:!3DES';\r\n    ssl_prefer_server_ciphers on;\r\n    ssl_dhparam /etc/nginx/dhparams.pem;\r\n\r\n    add_header X-Frame-Options \"SAMEORIGIN\";\r\n    add_header X-XSS-Protection \"1; mode=block\";\r\n    add_header X-Content-Type-Options \"nosniff\";\r\n\r\n    charset utf-8;\r\n\r\n    gzip            on;\r\n    gzip_types      text/plain application/xml text/css application/javascript;\r\n    gzip_min_length 1000;\r\n\r\n    # FORGE CONFIG (DOT NOT REMOVE!)\r\n    include forge-conf/YOUR_WEBSITE_FOLDER/server/*;\r\n\r\n    location / {\r\n        expires $expires;\r\n\r\n        proxy_set_header Host               $host;\r\n        proxy_set_header X-Real-IP          $remote_addr;\r\n        proxy_set_header X-Forwarded-For    $proxy_add_x_forwarded_for;\r\n        proxy_set_header X-Forwarded-Proto  $scheme;\r\n        proxy_redirect              off;\r\n        proxy_read_timeout          1m;\r\n        proxy_connect_timeout       1m;\r\n        proxy_pass                          http://127.0.0.1:3000; # set the address of the Node.js\r\n    }\r\n\r\n    access_log off;\r\n    error_log  /var/log/nginx/YOUR_WEBSITE_FOLDER-error.log error;\r\n\r\n    location ~ /\\.(?!well-known).* {\r\n        deny all;\r\n    }\r\n}\r\n\r\n# FORGE CONFIG (DOT NOT REMOVE!)\r\ninclude forge-conf/YOUR_WEBSITE_FOLDER/after/*;\n","language":"nginx"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"# FORGE CONFIG (DOT NOT REMOVE!)\r\ninclude forge-conf/YOUR_WEBSITE_FOLDER/before/*;\r\n\r\nmap $sent_http_content_type $expires {\r\n    \"text/html\"                 epoch;\r\n    \"text/html; charset=utf-8\"  epoch;\r\n    default                     off;\r\n}\r\n\r\nserver {\r\n    listen 443 ssl http2;\r\n    listen [::]:443 ssl http2;\r\n    server_name YOUR_WEBSITE_DOMAIN;\r\n\r\n    # FORGE SSL (DO NOT REMOVE!)\r\n    ssl_certificate /etc/nginx/ssl/YOUR_WEBSITE_FOLDER/258880/server.crt;\r\n    ssl_certificate_key /etc/nginx/ssl/YOUR_WEBSITE_FOLDER/258880/server.key;\r\n\r\n    ssl_protocols TLSv1 TLSv1.1 TLSv1.2;\r\n    ssl_ciphers 'ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-AES256-GCM-SHA384:DHE-RSA-AES128-GCM-SHA256:DHE-DSS-AES128-GCM-SHA256:kEDH+AESGCM:ECDHE-RSA-AES128-SHA256:ECDHE-ECDSA-AES128-SHA256:ECDHE-RSA-AES128-SHA:ECDHE-ECDSA-AES128-SHA:ECDHE-RSA-AES256-SHA384:ECDHE-ECDSA-AES256-SHA384:ECDHE-RSA-AES256-SHA:ECDHE-ECDSA-AES256-SHA:DHE-RSA-AES128-SHA256:DHE-RSA-AES128-SHA:DHE-DSS-AES128-SHA256:DHE-RSA-AES256-SHA256:DHE-DSS-AES256-SHA:DHE-RSA-AES256-SHA:AES128-GCM-SHA256:AES256-GCM-SHA384:AES128-SHA256:AES256-SHA256:AES128-SHA:AES256-SHA:AES:CAMELLIA:DES-CBC3-SHA:!aNULL:!eNULL:!EXPORT:!DES:!RC4:!MD5:!PSK:!aECDH:!EDH-DSS-DES-CBC3-SHA:!EDH-RSA-DES-CBC3-SHA:!KRB5-DES-CBC3-SHA:!3DES';\r\n    ssl_prefer_server_ciphers on;\r\n    ssl_dhparam /etc/nginx/dhparams.pem;\r\n\r\n    add_header X-Frame-Options \"SAMEORIGIN\";\r\n    add_header X-XSS-Protection \"1; mode=block\";\r\n    add_header X-Content-Type-Options \"nosniff\";\r\n\r\n    charset utf-8;\r\n\r\n    gzip            on;\r\n    gzip_types      text/plain application/xml text/css application/javascript;\r\n    gzip_min_length 1000;\r\n\r\n    # FORGE CONFIG (DOT NOT REMOVE!)\r\n    include forge-conf/YOUR_WEBSITE_FOLDER/server/*;\r\n\r\n    location / {\r\n        expires $expires;\r\n\r\n        proxy_set_header Host               $host;\r\n        proxy_set_header X-Real-IP          $remote_addr;\r\n        proxy_set_header X-Forwarded-For    $proxy_add_x_forwarded_for;\r\n        proxy_set_header X-Forwarded-Proto  $scheme;\r\n        proxy_redirect              off;\r\n        proxy_read_timeout          1m;\r\n        proxy_connect_timeout       1m;\r\n        proxy_pass                          http://127.0.0.1:3000; # set the address of the Node.js\r\n    }\r\n\r\n    access_log off;\r\n    error_log  /var/log/nginx/YOUR_WEBSITE_FOLDER-error.log error;\r\n\r\n    location ~ /\\.(?!well-known).* {\r\n        deny all;\r\n    }\r\n}\r\n\r\n# FORGE CONFIG (DOT NOT REMOVE!)\r\ninclude forge-conf/YOUR_WEBSITE_FOLDER/after/*;\n"}]}]}]}]},"template":"guide","target":"Static & Server","category":"deployment","logo":{"light":"/img/companies/square/light/Nginx.svg","dark":"/img/companies/square/dark/Nginx.svg"},"body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"using-nginx-as-a-reverse-proxy"},"children":[{"type":"text","value":"Using NGINX as a reverse proxy"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"How to use nginx as a reverse proxy?"}]},{"type":"element","tag":"hr","props":{},"children":[]},{"type":"element","tag":"code","props":{"code":"map $sent_http_content_type $expires {\r\n    \"text/html\"                 epoch;\r\n    \"text/html; charset=utf-8\"  epoch;\r\n    default                     off;\r\n}\r\n\r\nserver {\r\n    listen          80;             # the port nginx is listening on\r\n    server_name     your-domain;    # setup your domain here\r\n\r\n    gzip            on;\r\n    gzip_types      text/plain application/xml text/css application/javascript;\r\n    gzip_min_length 1000;\r\n\r\n    location / {\r\n        expires $expires;\r\n\r\n        proxy_redirect                      off;\r\n        proxy_set_header Host               $host;\r\n        proxy_set_header X-Real-IP          $remote_addr;\r\n        proxy_set_header X-Forwarded-For    $proxy_add_x_forwarded_for;\r\n        proxy_set_header X-Forwarded-Proto  $scheme;\r\n        proxy_read_timeout          1m;\r\n        proxy_connect_timeout       1m;\r\n        proxy_pass                          http://127.0.0.1:3000; # set the address of the Node.js instance here\r\n    }\r\n}\n","language":"nginx"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"map $sent_http_content_type $expires {\r\n    \"text/html\"                 epoch;\r\n    \"text/html; charset=utf-8\"  epoch;\r\n    default                     off;\r\n}\r\n\r\nserver {\r\n    listen          80;             # the port nginx is listening on\r\n    server_name     your-domain;    # setup your domain here\r\n\r\n    gzip            on;\r\n    gzip_types      text/plain application/xml text/css application/javascript;\r\n    gzip_min_length 1000;\r\n\r\n    location / {\r\n        expires $expires;\r\n\r\n        proxy_redirect                      off;\r\n        proxy_set_header Host               $host;\r\n        proxy_set_header X-Real-IP          $remote_addr;\r\n        proxy_set_header X-Forwarded-For    $proxy_add_x_forwarded_for;\r\n        proxy_set_header X-Forwarded-Proto  $scheme;\r\n        proxy_read_timeout          1m;\r\n        proxy_connect_timeout       1m;\r\n        proxy_pass                          http://127.0.0.1:3000; # set the address of the Node.js instance here\r\n    }\r\n}"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"using-nginx-with-generated-pages-and-a-caching-proxy-as-fallback"},"children":[{"type":"text","value":"Using nginx with generated pages and a caching proxy as fallback:"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"If you have a high volume website with regularly changing content, you might want to benefit from Nuxt generate capabilities and "},{"type":"element","tag":"a","props":{"href":"https://www.nginx.com/blog/nginx-caching-guide","rel":["nofollow"]},"children":[{"type":"text","value":"nginx caching"}]},{"type":"text","value":"."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Below is an example configuration. Keep in mind that:"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"root folder should be the same as set by "},{"type":"element","tag":"a","props":{"href":"/docs/configuration-glossary/configuration-generate#dir"},"children":[{"type":"text","value":"configuration generate.dir"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"expire headers set by Nuxt are stripped (due to the cache)"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"both Nuxt and nginx can set additional headers, it's advised to choose one (if in doubt, choose nginx)"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"if your site is mostly static, increase the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"proxy_cache_path inactive"}]},{"type":"text","value":" and "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"proxy_cache_valid"}]},{"type":"text","value":" numbers"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"If you don't generate your routes but still wish to benefit from nginx cache:"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"remove the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"root"}]},{"type":"text","value":" entry"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"change "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"location @proxy {"}]},{"type":"text","value":" to "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"location / {"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"remove the other 2 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"location"}]},{"type":"text","value":" entries"}]}]},{"type":"element","tag":"code","props":{"code":"proxy_cache_path  /data/nginx/cache levels=1:2 keys_zone=nuxt-cache:25m max_size=1g inactive=60m use_temp_path=off;\r\n\r\nmap $sent_http_content_type $expires {\r\n    \"text/html\"                 1h; # set this to your needs\r\n    \"text/html; charset=utf-8\"  1h; # set this to your needs\r\n    default                     7d; # set this to your needs\r\n}\r\n\r\nserver {\r\n    listen          80;             # the port nginx is listening on\r\n    server_name     your-domain;    # setup your domain here\r\n\r\n    gzip            on;\r\n    gzip_types      text/plain application/xml text/css application/javascript;\r\n    gzip_min_length 1000;\r\n\r\n    charset utf-8;\r\n\r\n    root /var/www/NUXT_PROJECT_PATH/dist;\r\n\r\n    location ~* \\.(?:ico|gif|jpe?g|png|woff2?|eot|otf|ttf|svg|js|css)$ {\r\n        expires $expires;\r\n        add_header Pragma public;\r\n        add_header Cache-Control \"public\";\r\n\r\n        try_files $uri $uri/ @proxy;\r\n    }\r\n\r\n    location / {\r\n        expires $expires;\r\n        add_header Content-Security-Policy \"default-src 'self' 'unsafe-inline';\";\r\n        add_header Strict-Transport-Security \"max-age=31536000; includeSubDomains; preload\" always;\r\n        add_header X-Frame-Options \"SAMEORIGIN\";\r\n\r\n        try_files $uri $uri/index.html @proxy; # for generate.subFolders: true\r\n        # try_files $uri $uri.html @proxy; # for generate.subFolders: false\r\n    }\r\n\r\n    location @proxy {\r\n        expires $expires;\r\n        add_header Content-Security-Policy \"default-src 'self' 'unsafe-inline';\";\r\n        add_header Strict-Transport-Security \"max-age=31536000; includeSubDomains; preload\" always;\r\n        add_header X-Frame-Options \"SAMEORIGIN\";\r\n        add_header X-Cache-Status $upstream_cache_status;\r\n\r\n        proxy_redirect                      off;\r\n        proxy_set_header Host               $host;\r\n        proxy_set_header X-Real-IP          $remote_addr;\r\n        proxy_set_header X-Forwarded-For    $proxy_add_x_forwarded_for;\r\n        proxy_set_header X-Forwarded-Proto  $scheme;\r\n        proxy_ignore_headers        Cache-Control;\r\n        proxy_http_version          1.1;\r\n        proxy_read_timeout          1m;\r\n        proxy_connect_timeout       1m;\r\n        proxy_pass                  http://127.0.0.1:3000; # set the address of the Node.js instance here\r\n        proxy_cache                 nuxt-cache;\r\n        proxy_cache_bypass          $arg_nocache; # probably better to change this\r\n        proxy_cache_valid           200 302  60m; # set this to your needs\r\n        proxy_cache_valid           404      1m;  # set this to your needs\r\n        proxy_cache_lock            on;\r\n        proxy_cache_use_stale error timeout http_500 http_502 http_503 http_504;\r\n        proxy_cache_key             $uri$is_args$args;\r\n    }\r\n}\n","language":"nginx"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"proxy_cache_path  /data/nginx/cache levels=1:2 keys_zone=nuxt-cache:25m max_size=1g inactive=60m use_temp_path=off;\r\n\r\nmap $sent_http_content_type $expires {\r\n    \"text/html\"                 1h; # set this to your needs\r\n    \"text/html; charset=utf-8\"  1h; # set this to your needs\r\n    default                     7d; # set this to your needs\r\n}\r\n\r\nserver {\r\n    listen          80;             # the port nginx is listening on\r\n    server_name     your-domain;    # setup your domain here\r\n\r\n    gzip            on;\r\n    gzip_types      text/plain application/xml text/css application/javascript;\r\n    gzip_min_length 1000;\r\n\r\n    charset utf-8;\r\n\r\n    root /var/www/NUXT_PROJECT_PATH/dist;\r\n\r\n    location ~* \\.(?:ico|gif|jpe?g|png|woff2?|eot|otf|ttf|svg|js|css)$ {\r\n        expires $expires;\r\n        add_header Pragma public;\r\n        add_header Cache-Control \"public\";\r\n\r\n        try_files $uri $uri/ @proxy;\r\n    }\r\n\r\n    location / {\r\n        expires $expires;\r\n        add_header Content-Security-Policy \"default-src 'self' 'unsafe-inline';\";\r\n        add_header Strict-Transport-Security \"max-age=31536000; includeSubDomains; preload\" always;\r\n        add_header X-Frame-Options \"SAMEORIGIN\";\r\n\r\n        try_files $uri $uri/index.html @proxy; # for generate.subFolders: true\r\n        # try_files $uri $uri.html @proxy; # for generate.subFolders: false\r\n    }\r\n\r\n    location @proxy {\r\n        expires $expires;\r\n        add_header Content-Security-Policy \"default-src 'self' 'unsafe-inline';\";\r\n        add_header Strict-Transport-Security \"max-age=31536000; includeSubDomains; preload\" always;\r\n        add_header X-Frame-Options \"SAMEORIGIN\";\r\n        add_header X-Cache-Status $upstream_cache_status;\r\n\r\n        proxy_redirect                      off;\r\n        proxy_set_header Host               $host;\r\n        proxy_set_header X-Real-IP          $remote_addr;\r\n        proxy_set_header X-Forwarded-For    $proxy_add_x_forwarded_for;\r\n        proxy_set_header X-Forwarded-Proto  $scheme;\r\n        proxy_ignore_headers        Cache-Control;\r\n        proxy_http_version          1.1;\r\n        proxy_read_timeout          1m;\r\n        proxy_connect_timeout       1m;\r\n        proxy_pass                  http://127.0.0.1:3000; # set the address of the Node.js instance here\r\n        proxy_cache                 nuxt-cache;\r\n        proxy_cache_bypass          $arg_nocache; # probably better to change this\r\n        proxy_cache_valid           200 302  60m; # set this to your needs\r\n        proxy_cache_valid           404      1m;  # set this to your needs\r\n        proxy_cache_lock            on;\r\n        proxy_cache_use_stale error timeout http_500 http_502 http_503 http_504;\r\n        proxy_cache_key             $uri$is_args$args;\r\n    }\r\n}"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"nginx-configuration-for-laravel-forge"},"children":[{"type":"text","value":"nginx configuration for Laravel Forge:"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Change "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"YOUR_WEBSITE_FOLDER"}]},{"type":"text","value":" to your website folder and "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"YOUR_WEBSITE_DOMAIN"}]},{"type":"text","value":" to your website URL. Laravel Forge will have filled out these values for you but be sure to double check."}]},{"type":"element","tag":"code","props":{"code":"# FORGE CONFIG (DOT NOT REMOVE!)\r\ninclude forge-conf/YOUR_WEBSITE_FOLDER/before/*;\r\n\r\nmap $sent_http_content_type $expires {\r\n    \"text/html\"                 epoch;\r\n    \"text/html; charset=utf-8\"  epoch;\r\n    default                     off;\r\n}\r\n\r\nserver {\r\n    listen 80;\r\n    listen [::]:80;\r\n    server_name YOUR_WEBSITE_DOMAIN;\r\n\r\n    add_header X-Frame-Options \"SAMEORIGIN\";\r\n    add_header X-XSS-Protection \"1; mode=block\";\r\n    add_header X-Content-Type-Options \"nosniff\";\r\n\r\n    charset utf-8;\r\n\r\n    gzip            on;\r\n    gzip_types      text/plain application/xml text/css application/javascript;\r\n    gzip_min_length 1000;\r\n\r\n    # FORGE CONFIG (DOT NOT REMOVE!)\r\n    include forge-conf/YOUR_WEBSITE_FOLDER/server/*;\r\n\r\n    location / {\r\n        expires $expires;\r\n\r\n        proxy_redirect off;\r\n        proxy_set_header Host               $host;\r\n        proxy_set_header X-Real-IP          $remote_addr;\r\n        proxy_set_header X-Forwarded-For    $proxy_add_x_forwarded_for;\r\n        proxy_set_header X-Forwarded-Proto  $scheme;\r\n        proxy_read_timeout          1m;\r\n        proxy_connect_timeout       1m;\r\n        proxy_pass                          http://127.0.0.1:3000; # set the address of the Node.js\r\n    }\r\n\r\n    access_log off;\r\n    error_log  /var/log/nginx/YOUR_WEBSITE_FOLDER-error.log error;\r\n\r\n    location ~ /\\.(?!well-known).* {\r\n        deny all;\r\n    }\r\n}\r\n\r\n# FORGE CONFIG (DOT NOT REMOVE!)\r\ninclude forge-conf/YOUR_WEBSITE_FOLDER/after/*;\n","language":"nginx"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"# FORGE CONFIG (DOT NOT REMOVE!)\r\ninclude forge-conf/YOUR_WEBSITE_FOLDER/before/*;\r\n\r\nmap $sent_http_content_type $expires {\r\n    \"text/html\"                 epoch;\r\n    \"text/html; charset=utf-8\"  epoch;\r\n    default                     off;\r\n}\r\n\r\nserver {\r\n    listen 80;\r\n    listen [::]:80;\r\n    server_name YOUR_WEBSITE_DOMAIN;\r\n\r\n    add_header X-Frame-Options \"SAMEORIGIN\";\r\n    add_header X-XSS-Protection \"1; mode=block\";\r\n    add_header X-Content-Type-Options \"nosniff\";\r\n\r\n    charset utf-8;\r\n\r\n    gzip            on;\r\n    gzip_types      text/plain application/xml text/css application/javascript;\r\n    gzip_min_length 1000;\r\n\r\n    # FORGE CONFIG (DOT NOT REMOVE!)\r\n    include forge-conf/YOUR_WEBSITE_FOLDER/server/*;\r\n\r\n    location / {\r\n        expires $expires;\r\n\r\n        proxy_redirect off;\r\n        proxy_set_header Host               $host;\r\n        proxy_set_header X-Real-IP          $remote_addr;\r\n        proxy_set_header X-Forwarded-For    $proxy_add_x_forwarded_for;\r\n        proxy_set_header X-Forwarded-Proto  $scheme;\r\n        proxy_read_timeout          1m;\r\n        proxy_connect_timeout       1m;\r\n        proxy_pass                          http://127.0.0.1:3000; # set the address of the Node.js\r\n    }\r\n\r\n    access_log off;\r\n    error_log  /var/log/nginx/YOUR_WEBSITE_FOLDER-error.log error;\r\n\r\n    location ~ /\\.(?!well-known).* {\r\n        deny all;\r\n    }\r\n}\r\n\r\n# FORGE CONFIG (DOT NOT REMOVE!)\r\ninclude forge-conf/YOUR_WEBSITE_FOLDER/after/*;"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"secure-laravel-forge-with-tls"},"children":[{"type":"text","value":"Secure Laravel Forge with TLS:"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"It's best to let Laravel Forge do the editing of the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"nginx.conf"}]},{"type":"text","value":" for you, by clicking on Sites -> YOUR_WEBSITE_DOMAIN (SERVER_NAME) and then click on SSL and install a certificate from one of the providers. Remember to activate the certificate. Your "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"nginx.conf"}]},{"type":"text","value":" should now look something like this:"}]},{"type":"element","tag":"code","props":{"code":"# FORGE CONFIG (DOT NOT REMOVE!)\r\ninclude forge-conf/YOUR_WEBSITE_FOLDER/before/*;\r\n\r\nmap $sent_http_content_type $expires {\r\n    \"text/html\"                 epoch;\r\n    \"text/html; charset=utf-8\"  epoch;\r\n    default                     off;\r\n}\r\n\r\nserver {\r\n    listen 443 ssl http2;\r\n    listen [::]:443 ssl http2;\r\n    server_name YOUR_WEBSITE_DOMAIN;\r\n\r\n    # FORGE SSL (DO NOT REMOVE!)\r\n    ssl_certificate /etc/nginx/ssl/YOUR_WEBSITE_FOLDER/258880/server.crt;\r\n    ssl_certificate_key /etc/nginx/ssl/YOUR_WEBSITE_FOLDER/258880/server.key;\r\n\r\n    ssl_protocols TLSv1 TLSv1.1 TLSv1.2;\r\n    ssl_ciphers 'ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-AES256-GCM-SHA384:DHE-RSA-AES128-GCM-SHA256:DHE-DSS-AES128-GCM-SHA256:kEDH+AESGCM:ECDHE-RSA-AES128-SHA256:ECDHE-ECDSA-AES128-SHA256:ECDHE-RSA-AES128-SHA:ECDHE-ECDSA-AES128-SHA:ECDHE-RSA-AES256-SHA384:ECDHE-ECDSA-AES256-SHA384:ECDHE-RSA-AES256-SHA:ECDHE-ECDSA-AES256-SHA:DHE-RSA-AES128-SHA256:DHE-RSA-AES128-SHA:DHE-DSS-AES128-SHA256:DHE-RSA-AES256-SHA256:DHE-DSS-AES256-SHA:DHE-RSA-AES256-SHA:AES128-GCM-SHA256:AES256-GCM-SHA384:AES128-SHA256:AES256-SHA256:AES128-SHA:AES256-SHA:AES:CAMELLIA:DES-CBC3-SHA:!aNULL:!eNULL:!EXPORT:!DES:!RC4:!MD5:!PSK:!aECDH:!EDH-DSS-DES-CBC3-SHA:!EDH-RSA-DES-CBC3-SHA:!KRB5-DES-CBC3-SHA:!3DES';\r\n    ssl_prefer_server_ciphers on;\r\n    ssl_dhparam /etc/nginx/dhparams.pem;\r\n\r\n    add_header X-Frame-Options \"SAMEORIGIN\";\r\n    add_header X-XSS-Protection \"1; mode=block\";\r\n    add_header X-Content-Type-Options \"nosniff\";\r\n\r\n    charset utf-8;\r\n\r\n    gzip            on;\r\n    gzip_types      text/plain application/xml text/css application/javascript;\r\n    gzip_min_length 1000;\r\n\r\n    # FORGE CONFIG (DOT NOT REMOVE!)\r\n    include forge-conf/YOUR_WEBSITE_FOLDER/server/*;\r\n\r\n    location / {\r\n        expires $expires;\r\n\r\n        proxy_set_header Host               $host;\r\n        proxy_set_header X-Real-IP          $remote_addr;\r\n        proxy_set_header X-Forwarded-For    $proxy_add_x_forwarded_for;\r\n        proxy_set_header X-Forwarded-Proto  $scheme;\r\n        proxy_redirect              off;\r\n        proxy_read_timeout          1m;\r\n        proxy_connect_timeout       1m;\r\n        proxy_pass                          http://127.0.0.1:3000; # set the address of the Node.js\r\n    }\r\n\r\n    access_log off;\r\n    error_log  /var/log/nginx/YOUR_WEBSITE_FOLDER-error.log error;\r\n\r\n    location ~ /\\.(?!well-known).* {\r\n        deny all;\r\n    }\r\n}\r\n\r\n# FORGE CONFIG (DOT NOT REMOVE!)\r\ninclude forge-conf/YOUR_WEBSITE_FOLDER/after/*;\n","language":"nginx"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"# FORGE CONFIG (DOT NOT REMOVE!)\r\ninclude forge-conf/YOUR_WEBSITE_FOLDER/before/*;\r\n\r\nmap $sent_http_content_type $expires {\r\n    \"text/html\"                 epoch;\r\n    \"text/html; charset=utf-8\"  epoch;\r\n    default                     off;\r\n}\r\n\r\nserver {\r\n    listen 443 ssl http2;\r\n    listen [::]:443 ssl http2;\r\n    server_name YOUR_WEBSITE_DOMAIN;\r\n\r\n    # FORGE SSL (DO NOT REMOVE!)\r\n    ssl_certificate /etc/nginx/ssl/YOUR_WEBSITE_FOLDER/258880/server.crt;\r\n    ssl_certificate_key /etc/nginx/ssl/YOUR_WEBSITE_FOLDER/258880/server.key;\r\n\r\n    ssl_protocols TLSv1 TLSv1.1 TLSv1.2;\r\n    ssl_ciphers 'ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-AES256-GCM-SHA384:DHE-RSA-AES128-GCM-SHA256:DHE-DSS-AES128-GCM-SHA256:kEDH+AESGCM:ECDHE-RSA-AES128-SHA256:ECDHE-ECDSA-AES128-SHA256:ECDHE-RSA-AES128-SHA:ECDHE-ECDSA-AES128-SHA:ECDHE-RSA-AES256-SHA384:ECDHE-ECDSA-AES256-SHA384:ECDHE-RSA-AES256-SHA:ECDHE-ECDSA-AES256-SHA:DHE-RSA-AES128-SHA256:DHE-RSA-AES128-SHA:DHE-DSS-AES128-SHA256:DHE-RSA-AES256-SHA256:DHE-DSS-AES256-SHA:DHE-RSA-AES256-SHA:AES128-GCM-SHA256:AES256-GCM-SHA384:AES128-SHA256:AES256-SHA256:AES128-SHA:AES256-SHA:AES:CAMELLIA:DES-CBC3-SHA:!aNULL:!eNULL:!EXPORT:!DES:!RC4:!MD5:!PSK:!aECDH:!EDH-DSS-DES-CBC3-SHA:!EDH-RSA-DES-CBC3-SHA:!KRB5-DES-CBC3-SHA:!3DES';\r\n    ssl_prefer_server_ciphers on;\r\n    ssl_dhparam /etc/nginx/dhparams.pem;\r\n\r\n    add_header X-Frame-Options \"SAMEORIGIN\";\r\n    add_header X-XSS-Protection \"1; mode=block\";\r\n    add_header X-Content-Type-Options \"nosniff\";\r\n\r\n    charset utf-8;\r\n\r\n    gzip            on;\r\n    gzip_types      text/plain application/xml text/css application/javascript;\r\n    gzip_min_length 1000;\r\n\r\n    # FORGE CONFIG (DOT NOT REMOVE!)\r\n    include forge-conf/YOUR_WEBSITE_FOLDER/server/*;\r\n\r\n    location / {\r\n        expires $expires;\r\n\r\n        proxy_set_header Host               $host;\r\n        proxy_set_header X-Real-IP          $remote_addr;\r\n        proxy_set_header X-Forwarded-For    $proxy_add_x_forwarded_for;\r\n        proxy_set_header X-Forwarded-Proto  $scheme;\r\n        proxy_redirect              off;\r\n        proxy_read_timeout          1m;\r\n        proxy_connect_timeout       1m;\r\n        proxy_pass                          http://127.0.0.1:3000; # set the address of the Node.js\r\n    }\r\n\r\n    access_log off;\r\n    error_log  /var/log/nginx/YOUR_WEBSITE_FOLDER-error.log error;\r\n\r\n    location ~ /\\.(?!well-known).* {\r\n        deny all;\r\n    }\r\n}\r\n\r\n# FORGE CONFIG (DOT NOT REMOVE!)\r\ninclude forge-conf/YOUR_WEBSITE_FOLDER/after/*;"}]}]}]}]}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"using-nginx-with-generated-pages-and-a-caching-proxy-as-fallback","depth":2,"text":"Using nginx with generated pages and a caching proxy as fallback:"},{"id":"nginx-configuration-for-laravel-forge","depth":2,"text":"nginx configuration for Laravel Forge:"},{"id":"secure-laravel-forge-with-tls","depth":2,"text":"Secure Laravel Forge with TLS:"}]}},"_type":"markdown","_id":"content:deployments:folder1:nginx.md","_source":"content","_file":"deployments/folder1/nginx.md","_extension":"md"}