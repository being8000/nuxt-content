{"_path":"/deployments/folder1/google-cloud-run","_draft":false,"_partial":false,"_locale":"en","_empty":false,"title":"Google Cloud Run","description":"How to deploy Nuxt on Google Cloud Run?","excerpt":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"deploy-nuxt-on-google-cloud-run"},"children":[{"type":"text","value":"Deploy Nuxt on Google Cloud Run"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"How to deploy Nuxt on Google Cloud Run?"}]},{"type":"element","tag":"hr","props":{},"children":[]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://cloud.google.com/run","rel":["nofollow"]},"children":[{"type":"text","value":"Google Cloud Run"}]},{"type":"text","value":" is a fully managed compute platform for deploying and scaling containerized applications quickly and securely."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"In this guide, we simply upload the entire project folder to Google Cloud Build with a Dockerfile. After the upload, Cloud Build will automatically generate a container. Then we will deploy this container to Google Cloud Run which will start it with the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"start"}]},{"type":"text","value":" script in our package.json."}]},{"type":"element","tag":"h2","props":{"id":"getting-started"},"children":[{"type":"text","value":"Getting Started"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Make sure you have a Google Cloud Account, a project and the accesses as editor on Cloud Build and Cloud Run. Furthermore, make sure to download and install the Cloud SDK (CLI) from Google as explained "},{"type":"element","tag":"a","props":{"href":"https://cloud.google.com/sdk/","rel":["nofollow"]},"children":[{"type":"text","value":"here"}]},{"type":"text","value":" and log into your Google Cloud Account. If you do not want to download the Cloud SDK, be aware that you can use gcloud CLI from the Google Cloud Console."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Now, let's do few checks!"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"If the Cloud Build API and the Cloud Run API are not enabled, enable them:"}]},{"type":"element","tag":"code","props":{"code":"# Enabling Cloud Build\r\n$ gcloud services enable cloudbuild.googleapis.com\r\n\r\n# Enabling Cloud Run\r\n$ gcloud services enable run.googleapis.com\n","language":"bash"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"# Enabling Cloud Build\r\n$ gcloud services enable cloudbuild.googleapis.com\r\n\r\n# Enabling Cloud Run\r\n$ gcloud services enable run.googleapis.com\n"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Go in your application directory and install dependencies:"}]},{"type":"element","tag":"code","props":{"code":"# For yarn users\r\n$ yarn\r\n\r\n# For npm users\r\n$ npm install\n","language":"bash"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"# For yarn users\r\n$ yarn\r\n\r\n# For npm users\r\n$ npm install\n"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Start the application locally:"}]},{"type":"element","tag":"code","props":{"code":"# For yarn users\r\n$ yarn dev\r\n\r\n# For npm users\r\n$ npm run dev\n","language":"bash"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"# For yarn users\r\n$ yarn dev\r\n\r\n# For npm users\r\n$ npm run dev\n"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Check that everything works."}]},{"type":"element","tag":"h2","props":{"id":"containerize-your-application"},"children":[{"type":"text","value":"Containerize your application"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Now, we will create a container with Cloud Build."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"You need to add to your Nuxt app a "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Dockerfile"}]},{"type":"text","value":". Create a new file named "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Dockerfile"}]},{"type":"text","value":" in your root project directory and add the following content:"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"For yarn users:"}]},{"type":"element","tag":"code","props":{"code":"FROM node:14\r\n\r\nWORKDIR /usr/src/app\r\n\r\nCOPY . ./\r\nRUN yarn\r\n\r\nEXPOSE 8080\r\n\r\nENV HOST=0.0.0.0\r\nENV PORT=8080\r\n\r\nRUN yarn build\r\n\r\nCMD [ \"yarn\", \"start\" ]\n","language":"Dockerfile"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"FROM node:14\r\n\r\nWORKDIR /usr/src/app\r\n\r\nCOPY . ./\r\nRUN yarn\r\n\r\nEXPOSE 8080\r\n\r\nENV HOST=0.0.0.0\r\nENV PORT=8080\r\n\r\nRUN yarn build\r\n\r\nCMD [ \"yarn\", \"start\" ]\n"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"For npm users:"}]},{"type":"element","tag":"code","props":{"code":"FROM node:14\r\n\r\nWORKDIR /usr/src/app\r\n\r\nCOPY . ./\r\nRUN npm install\r\n\r\nEXPOSE 8080\r\n\r\nENV HOST=0.0.0.0\r\nENV PORT=8080\r\n\r\nRUN npm run build\r\n\r\nCMD [ \"npm\", \"run\", \"start\" ]\n","language":"Dockerfile"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"FROM node:14\r\n\r\nWORKDIR /usr/src/app\r\n\r\nCOPY . ./\r\nRUN npm install\r\n\r\nEXPOSE 8080\r\n\r\nENV HOST=0.0.0.0\r\nENV PORT=8080\r\n\r\nRUN npm run build\r\n\r\nCMD [ \"npm\", \"run\", \"start\" ]\n"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Run the following command to start the build process:"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"gcloud builds submit --tag gcr.io/<YOUR_GOOGLE_CLOUD_PROJECT_ID>/my-nuxt-app-name:1.0.0 ."}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"!Attention: if you want to implement continuous delivery or .env files configurations, you will have to use a "},{"type":"element","tag":"a","props":{"href":"https://cloud.google.com/cloud-build/docs/build-config","rel":["nofollow"]},"children":[{"type":"text","value":"Cloud Build configuration file"}]},{"type":"text","value":"."}]},{"type":"element","tag":"h2","props":{"id":"deploying-your-application-on-cloud-run"},"children":[{"type":"text","value":"Deploying your application on Cloud Run"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Run the following command to deploy your application:"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"gcloud run deploy --image=gcr.io/<YOUR_GOOGLE_CLOUD_PROJECT_ID>/my-nuxt-app-name:1.0.0 --platform managed --port 3000"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Allow unauthenticated invocations if you want to set up a public access."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Be aware that Cloud Run applications will have a default concurrency value of 80 (each container instance will handle up to 80 requests at a time). You can specify the concurrency value this way:"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"gcloud run deploy --image=gcr.io/<YOUR_GOOGLE_CLOUD_PROJECT_ID>/my-nuxt-app-name:1.0.0 --platform managed --port 3000 --concurrency <YOUR_CONCURRENCY_VALUE>"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Run the following command to check if the deployment was created successfully:"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"gcloud run services list --platform managed"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"A list of Cloud Run services is displayed. Click on the URL of your deployment and enjoy the result!"}]}]},"template":"guide","target":"Server","category":"deployment","logo":{"light":"/img/companies/square/light/Google_Cloud_run.svg","dark":"/img/companies/square/dark/Google_Cloud_run.svg"},"body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"deploy-nuxt-on-google-cloud-run"},"children":[{"type":"text","value":"Deploy Nuxt on Google Cloud Run"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"How to deploy Nuxt on Google Cloud Run?"}]},{"type":"element","tag":"hr","props":{},"children":[]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://cloud.google.com/run","rel":["nofollow"]},"children":[{"type":"text","value":"Google Cloud Run"}]},{"type":"text","value":" is a fully managed compute platform for deploying and scaling containerized applications quickly and securely."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"In this guide, we simply upload the entire project folder to Google Cloud Build with a Dockerfile. After the upload, Cloud Build will automatically generate a container. Then we will deploy this container to Google Cloud Run which will start it with the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"start"}]},{"type":"text","value":" script in our package.json."}]},{"type":"element","tag":"h2","props":{"id":"getting-started"},"children":[{"type":"text","value":"Getting Started"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Make sure you have a Google Cloud Account, a project and the accesses as editor on Cloud Build and Cloud Run. Furthermore, make sure to download and install the Cloud SDK (CLI) from Google as explained "},{"type":"element","tag":"a","props":{"href":"https://cloud.google.com/sdk/","rel":["nofollow"]},"children":[{"type":"text","value":"here"}]},{"type":"text","value":" and log into your Google Cloud Account. If you do not want to download the Cloud SDK, be aware that you can use gcloud CLI from the Google Cloud Console."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Now, let's do few checks!"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"If the Cloud Build API and the Cloud Run API are not enabled, enable them:"}]},{"type":"element","tag":"code","props":{"code":"# Enabling Cloud Build\r\n$ gcloud services enable cloudbuild.googleapis.com\r\n\r\n# Enabling Cloud Run\r\n$ gcloud services enable run.googleapis.com\n","language":"bash"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-77f3c9"},"children":[{"type":"text","value":"# Enabling Cloud Build"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3fab4a"},"children":[{"type":"text","value":"$ gcloud services "}]},{"type":"element","tag":"span","props":{"class":"ct-8d1be9"},"children":[{"type":"text","value":"enable"}]},{"type":"element","tag":"span","props":{"class":"ct-3fab4a"},"children":[{"type":"text","value":" cloudbuild.googleapis.com"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-77f3c9"},"children":[{"type":"text","value":"# Enabling Cloud Run"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3fab4a"},"children":[{"type":"text","value":"$ gcloud services "}]},{"type":"element","tag":"span","props":{"class":"ct-8d1be9"},"children":[{"type":"text","value":"enable"}]},{"type":"element","tag":"span","props":{"class":"ct-3fab4a"},"children":[{"type":"text","value":" run.googleapis.com"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Go in your application directory and install dependencies:"}]},{"type":"element","tag":"code","props":{"code":"# For yarn users\r\n$ yarn\r\n\r\n# For npm users\r\n$ npm install\n","language":"bash"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-77f3c9"},"children":[{"type":"text","value":"# For yarn users"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3fab4a"},"children":[{"type":"text","value":"$ yarn"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-77f3c9"},"children":[{"type":"text","value":"# For npm users"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3fab4a"},"children":[{"type":"text","value":"$ npm install"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Start the application locally:"}]},{"type":"element","tag":"code","props":{"code":"# For yarn users\r\n$ yarn dev\r\n\r\n# For npm users\r\n$ npm run dev\n","language":"bash"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-77f3c9"},"children":[{"type":"text","value":"# For yarn users"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3fab4a"},"children":[{"type":"text","value":"$ yarn dev"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-77f3c9"},"children":[{"type":"text","value":"# For npm users"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3fab4a"},"children":[{"type":"text","value":"$ npm run dev"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Check that everything works."}]},{"type":"element","tag":"h2","props":{"id":"containerize-your-application"},"children":[{"type":"text","value":"Containerize your application"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Now, we will create a container with Cloud Build."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"You need to add to your Nuxt app a "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Dockerfile"}]},{"type":"text","value":". Create a new file named "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Dockerfile"}]},{"type":"text","value":" in your root project directory and add the following content:"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"For yarn users:"}]},{"type":"element","tag":"code","props":{"code":"FROM node:14\r\n\r\nWORKDIR /usr/src/app\r\n\r\nCOPY . ./\r\nRUN yarn\r\n\r\nEXPOSE 8080\r\n\r\nENV HOST=0.0.0.0\r\nENV PORT=8080\r\n\r\nRUN yarn build\r\n\r\nCMD [ \"yarn\", \"start\" ]\n","language":"Dockerfile"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"FROM node:14\r\n\r\nWORKDIR /usr/src/app\r\n\r\nCOPY . ./\r\nRUN yarn\r\n\r\nEXPOSE 8080\r\n\r\nENV HOST=0.0.0.0\r\nENV PORT=8080\r\n\r\nRUN yarn build\r\n\r\nCMD [ \"yarn\", \"start\" ]"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"For npm users:"}]},{"type":"element","tag":"code","props":{"code":"FROM node:14\r\n\r\nWORKDIR /usr/src/app\r\n\r\nCOPY . ./\r\nRUN npm install\r\n\r\nEXPOSE 8080\r\n\r\nENV HOST=0.0.0.0\r\nENV PORT=8080\r\n\r\nRUN npm run build\r\n\r\nCMD [ \"npm\", \"run\", \"start\" ]\n","language":"Dockerfile"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"FROM node:14\r\n\r\nWORKDIR /usr/src/app\r\n\r\nCOPY . ./\r\nRUN npm install\r\n\r\nEXPOSE 8080\r\n\r\nENV HOST=0.0.0.0\r\nENV PORT=8080\r\n\r\nRUN npm run build\r\n\r\nCMD [ \"npm\", \"run\", \"start\" ]"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Run the following command to start the build process:"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"gcloud builds submit --tag gcr.io/<YOUR_GOOGLE_CLOUD_PROJECT_ID>/my-nuxt-app-name:1.0.0 ."}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"!Attention: if you want to implement continuous delivery or .env files configurations, you will have to use a "},{"type":"element","tag":"a","props":{"href":"https://cloud.google.com/cloud-build/docs/build-config","rel":["nofollow"]},"children":[{"type":"text","value":"Cloud Build configuration file"}]},{"type":"text","value":"."}]},{"type":"element","tag":"h2","props":{"id":"deploying-your-application-on-cloud-run"},"children":[{"type":"text","value":"Deploying your application on Cloud Run"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Run the following command to deploy your application:"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"gcloud run deploy --image=gcr.io/<YOUR_GOOGLE_CLOUD_PROJECT_ID>/my-nuxt-app-name:1.0.0 --platform managed --port 3000"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Allow unauthenticated invocations if you want to set up a public access."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Be aware that Cloud Run applications will have a default concurrency value of 80 (each container instance will handle up to 80 requests at a time). You can specify the concurrency value this way:"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"gcloud run deploy --image=gcr.io/<YOUR_GOOGLE_CLOUD_PROJECT_ID>/my-nuxt-app-name:1.0.0 --platform managed --port 3000 --concurrency <YOUR_CONCURRENCY_VALUE>"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Run the following command to check if the deployment was created successfully:"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"gcloud run services list --platform managed"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"A list of Cloud Run services is displayed. Click on the URL of your deployment and enjoy the result!"}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-8d1be9{color:#97E1F1}.ct-3fab4a{color:#F6F6F4}.ct-77f3c9{color:#7B7F8B}.sepia .ct-77f3c9{color:#88846F}.dark .ct-77f3c9{color:#8B949E}.sepia .ct-3fab4a{color:#F8F8F2}.dark .ct-3fab4a{color:#C9D1D9}.sepia .ct-8d1be9{color:#66D9EF}.dark .ct-8d1be9{color:#79C0FF}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"getting-started","depth":2,"text":"Getting Started"},{"id":"containerize-your-application","depth":2,"text":"Containerize your application"},{"id":"deploying-your-application-on-cloud-run","depth":2,"text":"Deploying your application on Cloud Run"}]}},"_type":"markdown","_id":"content:deployments:folder1:google-cloud-run.md","_source":"content","_file":"deployments/folder1/google-cloud-run.md","_extension":"md"}